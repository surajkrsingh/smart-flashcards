(()=>{"use strict";var e={20:(e,t,s)=>{var a=s(609),o=Symbol.for("react.element"),l=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),r=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,s){var a,i={},c=null,p=null;for(a in void 0!==s&&(c=""+s),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(p=t.ref),t)l.call(t,a)&&!n.hasOwnProperty(a)&&(i[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===i[a]&&(i[a]=t[a]);return{$$typeof:o,type:e,key:c,ref:p,props:i,_owner:r.current}}},848:(e,t,s)=>{e.exports=s(20)},609:e=>{e.exports=window.React}},t={};function s(a){var o=t[a];if(void 0!==o)return o.exports;var l=t[a]={exports:{}};return e[a](l,l.exports,s),l.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const a=window.wp.blocks,o=window.wp.i18n,l=window.wp.blockEditor,r=window.wp.components,n=window.wp.element,i=window.wp.data,c=window.wp.apiFetch;var p=s.n(c);const d=window.wp.serverSideRender;var h=s.n(d);const m=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"smfcs/single-post-display","version":"1.0.0","title":"Single Post Display","category":"widgets","icon":"welcome-widgets-menus","description":"Display a single post with customizable elements","supports":{"html":false,"align":["wide","full"]},"textdomain":"smart-flashcards","editorScript":"file:../../../build/blocks/single-post-display/index.js","editorStyle":"file:../../../build/blocks/single-post-display/editor.css","style":"file:../../../build/blocks/single-post-display/style.css","attributes":{"postId":{"type":"number","default":0},"postType":{"type":"string","default":"post"},"showTitle":{"type":"boolean","default":true},"showContent":{"type":"boolean","default":true},"showExcerpt":{"type":"boolean","default":false},"showFeaturedImage":{"type":"boolean","default":true},"showMeta":{"type":"boolean","default":true},"showDate":{"type":"boolean","default":true},"showAuthor":{"type":"boolean","default":true},"imageSize":{"type":"string","default":"large"},"timestamp":{"type":"number","default":0}}}');var u=s(609);const f=window.wp.primitives;var _=s(848);const w=(0,_.jsx)(f.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,_.jsx)(f.Path,{d:"m7.3 9.7 1.4 1.4c.2-.2.3-.3.4-.5 0 0 0-.1.1-.1.3-.5.4-1.1.3-1.6L12 7 9 4 7.2 6.5c-.6-.1-1.1 0-1.6.3 0 0-.1 0-.1.1-.3.1-.4.2-.6.4l1.4 1.4L4 11v1h1l2.3-2.3zM4 20h9v-1.5H4V20zm0-5.5V16h16v-1.5H4z"})});(0,a.registerBlockType)(m.name,{...m,edit:({attributes:e,setAttributes:t})=>{const s=(0,l.useBlockProps)(),[a,c]=(0,n.useState)([]),[d,m]=(0,n.useState)(!1),[f,_]=(0,n.useState)(""),g=(0,i.useSelect)((e=>{const{getPostTypes:t}=e("core");return(t()||[]).filter((e=>e.viewable&&e.rest_base)).map((e=>({label:e.labels.singular_name,value:e.slug,restBase:e.rest_base})))}),[]);(0,n.useEffect)((()=>{e.postId&&(m(!0),_(""),(async()=>{try{const s=await p()({path:"/wp/v2/types",method:"GET"});if(e.postType){const t=s[e.postType];if(t&&t.rest_base){const s=await p()({path:`/wp/v2/${t.rest_base}/${e.postId}`,method:"GET"});s&&(c([{label:s.title.rendered||`Post #${s.id}`,value:s.id}]),_(""))}}else for(const[a,o]of Object.entries(s))try{const s=await p()({path:`/wp/v2/${o.rest_base}/${e.postId}`,method:"GET"});if(s){t({postType:a}),c([{label:s.title.rendered||`Post #${s.id}`,value:s.id}]),_("");break}}catch(e){continue}}catch(e){console.error("Error fetching post:",e),"rest_post_invalid_id"===e.code?_((0,o.__)("The selected post could not be found.","smart-flashcards")):_((0,o.__)("Error loading post. Please try selecting it again.","smart-flashcards"))}finally{m(!1)}})())}),[e.postId]),(0,n.useEffect)((()=>{e.postType?(m(!0),_(""),c([]),p()({path:"/wp/v2/types",method:"GET"}).then((s=>{const a=s[e.postType];if(!a||!a.rest_base)return _((0,o.__)("Invalid post type selected.","smart-flashcards")),void m(!1);p()({path:`/wp/v2/${a.rest_base}?per_page=50&_fields=id,title`,method:"GET"}).then((s=>{if(Array.isArray(s)&&s.length>0){const o=s.map((e=>({label:e.title.rendered||`Post #${e.id}`,value:e.id})));c(o),e.postId&&!o.find((t=>t.value===e.postId))&&p()({path:`/wp/v2/${a.rest_base}/${e.postId}`,method:"GET"}).then((e=>{e&&c([...o,{label:e.title.rendered||`Post #${e.id}`,value:e.id}])})).catch((()=>{t({postId:0})}))}else _((0,o.__)("No published posts found for this post type.","smart-flashcards"));m(!1)}))})).catch((e=>{console.error("Error fetching posts:",e),_((0,o.__)("Error fetching posts. Please check if the post type has REST API support.","smart-flashcards")),m(!1)}))):c([])}),[e.postType]);const b=[{label:(0,o.__)("Thumbnail","smart-flashcards"),value:"thumbnail"},{label:(0,o.__)("Medium","smart-flashcards"),value:"medium"},{label:(0,o.__)("Large","smart-flashcards"),value:"large"},{label:(0,o.__)("Full","smart-flashcards"),value:"full"}];return(0,u.createElement)("div",{...s},(0,u.createElement)(l.InspectorControls,null,(0,u.createElement)(r.PanelBody,{title:(0,o.__)("Post Selection","smart-flashcards"),initialOpen:!0},(0,u.createElement)(r.SelectControl,{label:(0,o.__)("Post Type","smart-flashcards"),value:e.postType,options:[{label:(0,o.__)("Select a post type","smart-flashcards"),value:""},...g],onChange:e=>{t({postType:e,postId:0})}}),f&&(0,u.createElement)(r.Notice,{status:"error",isDismissible:!1},f),d?(0,u.createElement)(r.Spinner,null):(0,u.createElement)(r.SelectControl,{label:(0,o.__)("Select Post","smart-flashcards"),value:e.postId||0,options:[{label:(0,o.__)("Select a post","smart-flashcards"),value:0},...a],onChange:e=>{const s=parseInt(e,10);t({postId:isNaN(s)?0:s,timestamp:Date.now()})},disabled:0===a.length})),(0,u.createElement)(r.PanelBody,{title:(0,o.__)("Display Options","smart-flashcards"),initialOpen:!0},(0,u.createElement)(r.ToggleControl,{label:(0,o.__)("Show Title","smart-flashcards"),checked:e.showTitle,onChange:e=>t({showTitle:e})}),(0,u.createElement)(r.ToggleControl,{label:(0,o.__)("Show Content","smart-flashcards"),checked:e.showContent,onChange:e=>t({showContent:e})}),(0,u.createElement)(r.ToggleControl,{label:(0,o.__)("Show Excerpt","smart-flashcards"),checked:e.showExcerpt,onChange:e=>t({showExcerpt:e})}),(0,u.createElement)(r.ToggleControl,{label:(0,o.__)("Show Featured Image","smart-flashcards"),checked:e.showFeaturedImage,onChange:e=>t({showFeaturedImage:e})}),e.showFeaturedImage&&(0,u.createElement)(r.SelectControl,{label:(0,o.__)("Image Size","smart-flashcards"),value:e.imageSize,options:b,onChange:e=>t({imageSize:e})}),(0,u.createElement)(r.ToggleControl,{label:(0,o.__)("Show Meta Information","smart-flashcards"),checked:e.showMeta,onChange:e=>t({showMeta:e})}),e.showMeta&&(0,u.createElement)(u.Fragment,null,(0,u.createElement)(r.ToggleControl,{label:(0,o.__)("Show Date","smart-flashcards"),checked:e.showDate,onChange:e=>t({showDate:e})}),(0,u.createElement)(r.ToggleControl,{label:(0,o.__)("Show Author","smart-flashcards"),checked:e.showAuthor,onChange:e=>t({showAuthor:e})})))),e.postId?(0,u.createElement)(h(),{block:"smfcs/single-post-display",attributes:e,skipBlockSupportAttributes:!0,EmptyResponsePlaceholder:()=>(0,u.createElement)(r.Placeholder,{icon:(0,u.createElement)(r.Icon,{icon:w}),label:(0,o.__)("Single Post Display","smart-flashcards"),instructions:(0,o.__)("Loading post content...","smart-flashcards")},(0,u.createElement)(r.Spinner,null)),ErrorResponsePlaceholder:({response:e})=>(0,u.createElement)(r.Placeholder,{icon:(0,u.createElement)(r.Icon,{icon:w}),label:(0,o.__)("Error","smart-flashcards"),instructions:e?.message||(0,o.__)("Error loading post content. Please try again.","smart-flashcards")})}):(0,u.createElement)(r.Placeholder,{icon:(0,u.createElement)(r.Icon,{icon:w}),label:(0,o.__)("Single Post Display","smart-flashcards"),instructions:(0,o.__)("Select a post type and post to display","smart-flashcards")}))},save:()=>null})})();