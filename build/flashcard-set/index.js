(()=>{"use strict";var e={20:(e,a,t)=>{var s=t(609),r=Symbol.for("react.element"),l=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),c=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n={key:!0,ref:!0,__self:!0,__source:!0};a.jsx=function(e,a,t){var s,o={},i=null,d=null;for(s in void 0!==t&&(i=""+t),void 0!==a.key&&(i=""+a.key),void 0!==a.ref&&(d=a.ref),a)l.call(a,s)&&!n.hasOwnProperty(s)&&(o[s]=a[s]);if(e&&e.defaultProps)for(s in a=e.defaultProps)void 0===o[s]&&(o[s]=a[s]);return{$$typeof:r,type:e,key:i,ref:d,props:o,_owner:c.current}}},848:(e,a,t)=>{e.exports=t(20)},609:e=>{e.exports=window.React}},a={};function t(s){var r=a[s];if(void 0!==r)return r.exports;var l=a[s]={exports:{}};return e[s](l,l.exports,t),l.exports}const s=window.wp.blocks,r=window.wp.i18n,l=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"smfcs/flashcard-set","version":"0.1.0","title":"Flashcard Set","category":"widgets","icon":"slides","description":"Create a set of flashcards with navigation","attributes":{"currentSlide":{"type":"number","default":0}},"supports":{"align":["wide","full"],"html":false},"textdomain":"smart-flashcards","editorScript":"file:../../../build/flashcard-set/index.js","editorStyle":"file:../../../build/editor.css","style":"file:../../../build/style.css","viewScript":"file:../../../build/frontend.js"}');var c=t(609);const n=window.wp.blockEditor,o=window.wp.components,i=window.wp.data,d=window.wp.primitives;var m=t(848);const f=(0,m.jsx)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,m.jsx)(d.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})}),u=(0,m.jsx)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,m.jsx)(d.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})}),h=window.wp.element,p=["smfcs/flashcard"],v=[["smfcs/flashcard",{index:1}]];(0,s.registerBlockType)(l.name,{...l,title:(0,r.__)("Flashcard Set","smart-flashcards"),description:(0,r.__)("Create a set of flashcards with carousel navigation","smart-flashcards"),edit:function({attributes:e,setAttributes:a,clientId:t}){const{currentSlide:s=0}=e,[l,d]=(0,h.useState)(!1),m=(0,n.useBlockProps)(),w=(0,h.useRef)(null),{innerBlocks:_}=(0,i.useSelect)((e=>({innerBlocks:e("core/block-editor").getBlocks(t)})),[t]),{removeBlock:E,insertBlock:b}=(0,i.useDispatch)("core/block-editor"),k=_?.length||0;(0,h.useEffect)((()=>{l||(0===k&&y(),d(!0))}),[l]),(0,h.useEffect)((()=>{if(l&&w.current){console.log("wrapperRef.current",w.current);const e=w.current.querySelectorAll(".wp-block-smfcs-flashcard");console.log("cards",e),e.forEach(((e,a)=>{a===s?(e.classList.add("is-active"),e.style.display="block"):(e.classList.remove("is-active"),e.style.display="none")}))}}),[s,_,l]);const y=()=>{const e=wp.blocks.createBlock("smfcs/flashcard",{index:k+1});b(e,k,t),a({currentSlide:k})},x=e=>{a({currentSlide:e})};return(0,c.createElement)(c.Fragment,null,(0,c.createElement)(n.InspectorControls,null,(0,c.createElement)(o.PanelBody,{title:(0,r.__)("Flashcard Set Controls","smart-flashcards")},(0,c.createElement)("div",{className:"flashcard-set-sidebar-controls"},(0,c.createElement)("div",{className:"flashcard-navigation"},(0,c.createElement)(o.__experimentalNumberControl,{label:(0,r.__)("Current Flashcard","smart-flashcards"),value:s+1,onChange:e=>{const a=Math.min(Math.max(1,e),k);x(a-1)},min:1,max:k}),(0,c.createElement)("div",{className:"flashcard-count"},(0,r.__)("Total Flashcards:","smart-flashcards")," ",k)),k>1&&(0,c.createElement)(o.Button,{variant:"secondary",onClick:()=>{if(k>1){const e=_[s];E(e.clientId),a({currentSlide:Math.max(0,s-1)})}},icon:f,className:"remove-flashcard-button",isDestructive:!0},(0,r.__)("Remove Current Flashcard","smart-flashcards"))))),(0,c.createElement)("div",{...m,ref:w},(0,c.createElement)("div",{className:"flashcard-set-editor"},(0,c.createElement)("div",{className:"flashcard-set-simple-nav"},(0,c.createElement)(o.ButtonGroup,null,(0,c.createElement)(o.Button,{variant:"secondary",onClick:()=>x(Math.max(0,s-1)),disabled:0===s},(0,r.__)("Previous","smart-flashcards")),(0,c.createElement)(o.Button,{variant:"secondary",className:"current-slide-indicator",disabled:!0},s+1," / ",k),(0,c.createElement)(o.Button,{variant:"secondary",onClick:()=>x(Math.min(k-1,s+1)),disabled:s===k-1},(0,r.__)("Next","smart-flashcards")),(0,c.createElement)(o.Button,{variant:"primary",onClick:y,icon:u,className:"add-flashcard-button"},(0,r.__)("Add","smart-flashcards")))),(0,c.createElement)("div",{className:"flashcard-editor"},(0,c.createElement)(n.InnerBlocks,{allowedBlocks:p,template:v,templateLock:!1})))))},save:function(){const e=n.useBlockProps.save();return(0,c.createElement)("div",{...e},(0,c.createElement)("div",{className:"flashcard-set-wrapper"},(0,c.createElement)("div",{className:"flashcard-set-slides"},(0,c.createElement)("div",{className:"flashcard-set-track"},(0,c.createElement)(n.InnerBlocks.Content,null))),(0,c.createElement)("div",{className:"flashcard-set-nav"},(0,c.createElement)("button",{type:"button",className:"flashcard-nav-button prev","aria-label":(0,r.__)("Previous flashcard","smart-flashcards")},(0,c.createElement)("span",{className:"dashicons dashicons-arrow-left-alt2"}),(0,r.__)("Previous","smart-flashcards")),(0,c.createElement)("span",{className:"flashcard-set-counter"},"1 / 1"),(0,c.createElement)("button",{type:"button",className:"flashcard-nav-button next","aria-label":(0,r.__)("Next flashcard","smart-flashcards")},(0,r.__)("Next","smart-flashcards"),(0,c.createElement)("span",{className:"dashicons dashicons-arrow-right-alt2"})))))}})})();