(()=>{"use strict";var e={20:(e,t,a)=>{var s=a(609),r=Symbol.for("react.element"),l=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,a){var s,i={},c=null,d=null;for(s in void 0!==a&&(c=""+a),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)l.call(t,s)&&!n.hasOwnProperty(s)&&(i[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===i[s]&&(i[s]=t[s]);return{$$typeof:r,type:e,key:c,ref:d,props:i,_owner:o.current}}},848:(e,t,a)=>{e.exports=a(20)},609:e=>{e.exports=window.React}},t={};function a(s){var r=t[s];if(void 0!==r)return r.exports;var l=t[s]={exports:{}};return e[s](l,l.exports,a),l.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const s=window.wp.blocks,r=window.wp.i18n,l=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"smfcs/single-post-display","version":"1.0.0","title":"Single Post Display","category":"widgets","icon":"welcome-widgets-menus","description":"Display a single post with customizable elements","supports":{"html":false,"align":["wide","full"]},"textdomain":"smart-flashcards","editorScript":"file:../../../build/blocks/single-post-display/index.js","editorStyle":"file:../../../build/blocks/single-post-display/editor.css","style":"file:../../../build/blocks/single-post-display/style.css","attributes":{"postId":{"type":"number","default":0},"postType":{"type":"string","default":"post"},"showTitle":{"type":"boolean","default":true},"showContent":{"type":"boolean","default":false},"showExcerpt":{"type":"boolean","default":true},"showFeaturedImage":{"type":"boolean","default":false},"showMeta":{"type":"boolean","default":false},"showDate":{"type":"boolean","default":false},"showAuthor":{"type":"boolean","default":false},"imageSize":{"type":"string","default":"large"},"timestamp":{"type":"number","default":0},"showReadMore":{"type":"boolean","default":false},"readMoreText":{"type":"string","default":"Read More"},"readMoreAlignment":{"type":"string","default":"center","enum":["left","center","right"]}}}');var o=a(609);const n=window.wp.blockEditor,i=window.wp.components,c=window.wp.element,d=(window.wp.data,window.wp.apiFetch);var h=a.n(d);const p=window.wp.serverSideRender;var m=a.n(p);const u=window.wp.primitives;var f=a(848);const g=(0,f.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,f.jsx)(u.Path,{d:"M13 5.5H4V4h9v1.5Zm7 7H4V11h16v1.5Zm-7 7H4V18h9v1.5Z"})}),w=(0,f.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,f.jsx)(u.Path,{d:"M7.5 5.5h9V4h-9v1.5Zm-3.5 7h16V11H4v1.5Zm3.5 7h9V18h-9v1.5Z"})}),_=(0,f.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,f.jsx)(u.Path,{d:"M11.111 5.5H20V4h-8.889v1.5ZM4 12.5h16V11H4v1.5Zm7.111 7H20V18h-8.889v1.5Z"})}),b=(0,f.jsx)(u.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,f.jsx)(u.Path,{d:"m7.3 9.7 1.4 1.4c.2-.2.3-.3.4-.5 0 0 0-.1.1-.1.3-.5.4-1.1.3-1.6L12 7 9 4 7.2 6.5c-.6-.1-1.1 0-1.6.3 0 0-.1 0-.1.1-.3.1-.4.2-.6.4l1.4 1.4L4 11v1h1l2.3-2.3zM4 20h9v-1.5H4V20zm0-5.5V16h16v-1.5H4z"})}),y=window.lodash;(0,s.registerBlockType)(l.name,{...l,edit:({attributes:e,setAttributes:t})=>{const a=(0,n.useBlockProps)(),[s,l]=(0,c.useState)([]),[d,p]=(0,c.useState)(!1),[u,f]=(0,c.useState)(""),[v,E]=(0,c.useState)(""),[S,x]=(0,c.useState)([]),[C,T]=(0,c.useState)([]);(0,c.useEffect)((()=>{h()({path:"/wp/v2/types",method:"GET"}).then((e=>{const t=Object.entries(e).filter((([e,t])=>!!t?.rest_base)).map((([e,t])=>({label:t.labels?.singular_name||t.name,value:e,restBase:t.rest_base||e})));0!==t.length?(f(""),T(t)):f((0,r.__)("No public post types available.","smart-flashcards"))})).catch((e=>{f((0,r.__)("Error fetching post types.","smart-flashcards"))}))}),[]),(0,c.useEffect)((()=>{e.postType?(p(!0),f(""),h()({path:"/wp/v2/types",method:"GET"}).then((t=>{const a=t[e.postType];if(!a||!a.rest_base)return f((0,r.__)("Invalid post type selected.","smart-flashcards")),void p(!1);h()({path:`/wp/v2/${a.rest_base}?per_page=20&_fields=id,title,author&orderby=date&order=desc`,method:"GET"}).then((t=>{if(Array.isArray(t)&&t.length>0){const s=t.map((e=>({label:e.title.rendered||`Post #${e.id}`,value:e.id.toString()})));l(s),e.postId&&!s.find((t=>t.value===e.postId.toString()))&&h()({path:`/wp/v2/${a.rest_base}/${e.postId}`,method:"GET"}).then((e=>{e&&l([{label:e.title.rendered||`Post #${e.id}`,value:e.id.toString()},...s])}))}p(!1)}))})).catch((e=>{console.error("Error fetching posts:",e),f((0,r.__)("Error fetching posts.","smart-flashcards")),p(!1)}))):l([])}),[e.postType]);const M=(0,c.useCallback)((0,y.debounce)((async t=>{if(e.postType&&t)try{const a=(await h()({path:"/wp/v2/types",method:"GET"}))[e.postType];if(!a||!a.rest_base)return;const s=await h()({path:`/wp/v2/${a.rest_base}?search=${encodeURIComponent(t)}&per_page=20&_fields=id,title`,method:"GET"});if(Array.isArray(s)){const e=s.map((e=>({label:e.title.rendered||`Post #${e.id}`,value:e.id.toString()})));x(e)}}catch(e){console.error("Error searching posts:",e)}else x([])}),300),[e.postType]),P=[{label:(0,r.__)("Thumbnail","smart-flashcards"),value:"thumbnail"},{label:(0,r.__)("Medium","smart-flashcards"),value:"medium"},{label:(0,r.__)("Large","smart-flashcards"),value:"large"},{label:(0,r.__)("Full","smart-flashcards"),value:"full"}];return(0,o.createElement)("div",{...a},(0,o.createElement)(n.InspectorControls,null,(0,o.createElement)(i.PanelBody,{title:(0,r.__)("Post Selection","smart-flashcards"),initialOpen:!0},(0,o.createElement)(i.SelectControl,{label:(0,r.__)("Post Type","smart-flashcards"),value:e.postType,options:[{label:(0,r.__)("Select a post type","smart-flashcards"),value:""},...C],onChange:e=>{t({postType:e,postId:0}),E(""),x([])}}),u&&(0,o.createElement)(i.Notice,{status:"error",isDismissible:!1},u),d?(0,o.createElement)(i.Spinner,null):(0,o.createElement)(i.ComboboxControl,{label:(0,r.__)("Search and Select Post","smart-flashcards"),value:e.postId?e.postId.toString():"",options:v?S:s,onFilterValueChange:e=>{E(e),e&&M(e)},onChange:e=>{t({postId:parseInt(e,10),timestamp:Date.now()})},allowReset:!0,help:(0,r.__)("Type to search posts or select from recent posts","smart-flashcards")})),(0,o.createElement)(i.PanelBody,{title:(0,r.__)("Display Options","smart-flashcards"),initialOpen:!0},(0,o.createElement)(i.ToggleControl,{label:(0,r.__)("Show Title","smart-flashcards"),checked:e.showTitle,onChange:e=>t({showTitle:e})}),(0,o.createElement)(i.ToggleControl,{label:(0,r.__)("Show Content","smart-flashcards"),checked:e.showContent,onChange:e=>t({showContent:e})}),(0,o.createElement)(i.ToggleControl,{label:(0,r.__)("Show Excerpt","smart-flashcards"),checked:e.showExcerpt,onChange:e=>t({showExcerpt:e})}),(0,o.createElement)(i.ToggleControl,{label:(0,r.__)("Show Featured Image","smart-flashcards"),checked:e.showFeaturedImage,onChange:e=>t({showFeaturedImage:e})}),e.showFeaturedImage&&(0,o.createElement)(i.SelectControl,{label:(0,r.__)("Image Size","smart-flashcards"),value:e.imageSize,options:P,onChange:e=>t({imageSize:e})}),(0,o.createElement)(i.ToggleControl,{label:(0,r.__)("Show Meta Information","smart-flashcards"),checked:e.showMeta,onChange:e=>t({showMeta:e})}),e.showMeta&&(0,o.createElement)(o.Fragment,null,(0,o.createElement)(i.ToggleControl,{label:(0,r.__)("Show Date","smart-flashcards"),checked:e.showDate,onChange:e=>t({showDate:e})}),(0,o.createElement)(i.ToggleControl,{label:(0,r.__)("Show Author","smart-flashcards"),checked:e.showAuthor,onChange:e=>t({showAuthor:e})})),(0,o.createElement)(i.ToggleControl,{label:(0,r.__)("Show Read More Button","smart-flashcards"),checked:e.showReadMore,onChange:e=>t({showReadMore:e})}),e.showReadMore&&(0,o.createElement)(o.Fragment,null,(0,o.createElement)(i.TextControl,{label:(0,r.__)("Read More Text","smart-flashcards"),value:e.readMoreText,onChange:e=>t({readMoreText:e}),help:(0,r.__)("Customize the text for the read more button","smart-flashcards")}),(0,o.createElement)(i.Flex,{align:"flex-start",justify:"space-between"},(0,o.createElement)(i.FlexItem,null,(0,o.createElement)("label",{className:"components-base-control__label"},(0,r.__)("Button Alignment","smart-flashcards"))),(0,o.createElement)(i.FlexItem,null,(0,o.createElement)(i.ButtonGroup,null,(0,o.createElement)(i.Button,{icon:g,isSmall:!0,isPrimary:"left"===e.readMoreAlignment,isSecondary:"left"!==e.readMoreAlignment,onClick:()=>t({readMoreAlignment:"left"}),label:(0,r.__)("Align Left","smart-flashcards")}),(0,o.createElement)(i.Button,{icon:w,isSmall:!0,isPrimary:"center"===e.readMoreAlignment,isSecondary:"center"!==e.readMoreAlignment,onClick:()=>t({readMoreAlignment:"center"}),label:(0,r.__)("Align Center","smart-flashcards")}),(0,o.createElement)(i.Button,{icon:_,isSmall:!0,isPrimary:"right"===e.readMoreAlignment,isSecondary:"right"!==e.readMoreAlignment,onClick:()=>t({readMoreAlignment:"right"}),label:(0,r.__)("Align Right","smart-flashcards")}))))))),e.postId?(0,o.createElement)(m(),{block:"smfcs/single-post-display",attributes:e,skipBlockSupportAttributes:!0,EmptyResponsePlaceholder:()=>(0,o.createElement)(i.Placeholder,{icon:(0,o.createElement)(i.Icon,{icon:b}),label:(0,r.__)("Single Post Display","smart-flashcards"),instructions:(0,r.__)("Loading post content...","smart-flashcards")},(0,o.createElement)(i.Spinner,null)),ErrorResponsePlaceholder:({response:e})=>(0,o.createElement)(i.Placeholder,{icon:(0,o.createElement)(i.Icon,{icon:b}),label:(0,r.__)("Error","smart-flashcards"),instructions:e?.message||(0,r.__)("Error loading post content. Please try again.","smart-flashcards")})}):(0,o.createElement)(i.Placeholder,{icon:(0,o.createElement)(i.Icon,{icon:b}),label:(0,r.__)("Single Post Display","smart-flashcards"),instructions:(0,r.__)("Select a post type and post to display","smart-flashcards")}))},save:()=>null})})();