(()=>{"use strict";var e={20:(e,t,a)=>{var r=a(609),s=Symbol.for("react.element"),l=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,a){var r,i={},c=null,d=null;for(r in void 0!==a&&(c=""+a),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)l.call(t,r)&&!n.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:s,type:e,key:c,ref:d,props:i,_owner:o.current}}},848:(e,t,a)=>{e.exports=a(20)},609:e=>{e.exports=window.React}},t={};function a(r){var s=t[r];if(void 0!==s)return s.exports;var l=t[r]={exports:{}};return e[r](l,l.exports,a),l.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const r=window.wp.blocks,s=window.wp.i18n,l=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"smfcs/single-post-display","version":"1.0.0","title":"Single Post Display","category":"widgets","icon":"welcome-widgets-menus","description":"Display a single post with customizable elements","supports":{"html":false,"align":["wide","full"]},"textdomain":"smart-flashcards","editorScript":"file:../../../build/blocks/single-post-display/index.js","editorStyle":"file:../../../build/blocks/single-post-display/editor.css","style":"file:../../../build/blocks/single-post-display/style.css","attributes":{"postId":{"type":"number","default":0},"postType":{"type":"string","default":"post"},"showTitle":{"type":"boolean","default":true},"showContent":{"type":"boolean","default":true},"showExcerpt":{"type":"boolean","default":false},"showFeaturedImage":{"type":"boolean","default":true},"showMeta":{"type":"boolean","default":true},"showDate":{"type":"boolean","default":true},"showAuthor":{"type":"boolean","default":true},"imageSize":{"type":"string","default":"large"},"timestamp":{"type":"number","default":0},"showReadMore":{"type":"boolean","default":true},"readMoreText":{"type":"string","default":"Read More"},"readMoreAlignment":{"type":"string","default":"center","enum":["left","center","right"]}}}');var o=a(609);const n=window.wp.blockEditor,i=window.wp.components,c=window.wp.element,d=window.wp.data,p=window.wp.apiFetch;var h=a.n(p);const m=window.wp.serverSideRender;var u=a.n(m);const g=window.wp.primitives;var w=a(848);const f=(0,w.jsx)(g.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,w.jsx)(g.Path,{d:"M13 5.5H4V4h9v1.5Zm7 7H4V11h16v1.5Zm-7 7H4V18h9v1.5Z"})}),_=(0,w.jsx)(g.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,w.jsx)(g.Path,{d:"M7.5 5.5h9V4h-9v1.5Zm-3.5 7h16V11H4v1.5Zm3.5 7h9V18h-9v1.5Z"})}),b=(0,w.jsx)(g.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,w.jsx)(g.Path,{d:"M11.111 5.5H20V4h-8.889v1.5ZM4 12.5h16V11H4v1.5Zm7.111 7H20V18h-8.889v1.5Z"})}),y=(0,w.jsx)(g.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,w.jsx)(g.Path,{d:"m7.3 9.7 1.4 1.4c.2-.2.3-.3.4-.5 0 0 0-.1.1-.1.3-.5.4-1.1.3-1.6L12 7 9 4 7.2 6.5c-.6-.1-1.1 0-1.6.3 0 0-.1 0-.1.1-.3.1-.4.2-.6.4l1.4 1.4L4 11v1h1l2.3-2.3zM4 20h9v-1.5H4V20zm0-5.5V16h16v-1.5H4z"})}),v=window.lodash;(0,r.registerBlockType)(l.name,{...l,edit:({attributes:e,setAttributes:t})=>{const a=(0,n.useBlockProps)(),[r,l]=(0,c.useState)([]),[p,m]=(0,c.useState)(!1),[g,w]=(0,c.useState)(""),[E,S]=(0,c.useState)(""),[x,C]=(0,c.useState)([]),T=(0,d.useSelect)((e=>{const{getPostTypes:t}=e("core");return(t()||[]).filter((e=>e.viewable&&e.rest_base)).map((e=>({label:e.labels.singular_name,value:e.slug,restBase:e.rest_base})))}),[]);(0,c.useEffect)((()=>{e.postType?(m(!0),w(""),h()({path:"/wp/v2/types",method:"GET"}).then((t=>{const a=t[e.postType];if(!a||!a.rest_base)return w((0,s.__)("Invalid post type selected.","smart-flashcards")),void m(!1);h()({path:`/wp/v2/${a.rest_base}?per_page=20&_fields=id,title,author&orderby=date&order=desc`,method:"GET"}).then((t=>{if(Array.isArray(t)&&t.length>0){const r=t.map((e=>({label:e.title.rendered||`Post #${e.id}`,value:e.id.toString()})));l(r),e.postId&&!r.find((t=>t.value===e.postId.toString()))&&h()({path:`/wp/v2/${a.rest_base}/${e.postId}`,method:"GET"}).then((e=>{e&&l([{label:e.title.rendered||`Post #${e.id}`,value:e.id.toString()},...r])}))}m(!1)}))})).catch((e=>{console.error("Error fetching posts:",e),w((0,s.__)("Error fetching posts.","smart-flashcards")),m(!1)}))):l([])}),[e.postType]);const M=(0,c.useCallback)((0,v.debounce)((async t=>{if(e.postType&&t)try{const a=(await h()({path:"/wp/v2/types",method:"GET"}))[e.postType];if(!a||!a.rest_base)return;const r=await h()({path:`/wp/v2/${a.rest_base}?search=${encodeURIComponent(t)}&per_page=20&_fields=id,title`,method:"GET"});if(Array.isArray(r)){const e=r.map((e=>({label:e.title.rendered||`Post #${e.id}`,value:e.id.toString()})));C(e)}}catch(e){console.error("Error searching posts:",e)}else C([])}),300),[e.postType]),P=[{label:(0,s.__)("Thumbnail","smart-flashcards"),value:"thumbnail"},{label:(0,s.__)("Medium","smart-flashcards"),value:"medium"},{label:(0,s.__)("Large","smart-flashcards"),value:"large"},{label:(0,s.__)("Full","smart-flashcards"),value:"full"}];return(0,o.createElement)("div",{...a},(0,o.createElement)(n.InspectorControls,null,(0,o.createElement)(i.PanelBody,{title:(0,s.__)("Post Selection","smart-flashcards"),initialOpen:!0},(0,o.createElement)(i.SelectControl,{label:(0,s.__)("Post Type","smart-flashcards"),value:e.postType,options:[{label:(0,s.__)("Select a post type","smart-flashcards"),value:""},...T],onChange:e=>{t({postType:e,postId:0}),S(""),C([])}}),g&&(0,o.createElement)(i.Notice,{status:"error",isDismissible:!1},g),p?(0,o.createElement)(i.Spinner,null):(0,o.createElement)(i.ComboboxControl,{label:(0,s.__)("Search and Select Post","smart-flashcards"),value:e.postId?e.postId.toString():"",options:E?x:r,onFilterValueChange:e=>{S(e),e&&M(e)},onChange:e=>{t({postId:parseInt(e,10),timestamp:Date.now()})},allowReset:!0,help:(0,s.__)("Type to search posts or select from recent posts","smart-flashcards")})),(0,o.createElement)(i.PanelBody,{title:(0,s.__)("Display Options","smart-flashcards"),initialOpen:!0},(0,o.createElement)(i.ToggleControl,{label:(0,s.__)("Show Title","smart-flashcards"),checked:e.showTitle,onChange:e=>t({showTitle:e})}),(0,o.createElement)(i.ToggleControl,{label:(0,s.__)("Show Content","smart-flashcards"),checked:e.showContent,onChange:e=>t({showContent:e})}),(0,o.createElement)(i.ToggleControl,{label:(0,s.__)("Show Excerpt","smart-flashcards"),checked:e.showExcerpt,onChange:e=>t({showExcerpt:e})}),(0,o.createElement)(i.ToggleControl,{label:(0,s.__)("Show Featured Image","smart-flashcards"),checked:e.showFeaturedImage,onChange:e=>t({showFeaturedImage:e})}),e.showFeaturedImage&&(0,o.createElement)(i.SelectControl,{label:(0,s.__)("Image Size","smart-flashcards"),value:e.imageSize,options:P,onChange:e=>t({imageSize:e})}),(0,o.createElement)(i.ToggleControl,{label:(0,s.__)("Show Meta Information","smart-flashcards"),checked:e.showMeta,onChange:e=>t({showMeta:e})}),e.showMeta&&(0,o.createElement)(o.Fragment,null,(0,o.createElement)(i.ToggleControl,{label:(0,s.__)("Show Date","smart-flashcards"),checked:e.showDate,onChange:e=>t({showDate:e})}),(0,o.createElement)(i.ToggleControl,{label:(0,s.__)("Show Author","smart-flashcards"),checked:e.showAuthor,onChange:e=>t({showAuthor:e})})),(0,o.createElement)(i.ToggleControl,{label:(0,s.__)("Show Read More Button","smart-flashcards"),checked:e.showReadMore,onChange:e=>t({showReadMore:e})}),e.showReadMore&&(0,o.createElement)(o.Fragment,null,(0,o.createElement)(i.TextControl,{label:(0,s.__)("Read More Text","smart-flashcards"),value:e.readMoreText,onChange:e=>t({readMoreText:e}),help:(0,s.__)("Customize the text for the read more button","smart-flashcards")}),(0,o.createElement)(i.Flex,{align:"flex-start",justify:"space-between"},(0,o.createElement)(i.FlexItem,null,(0,o.createElement)("label",{className:"components-base-control__label"},(0,s.__)("Button Alignment","smart-flashcards"))),(0,o.createElement)(i.FlexItem,null,(0,o.createElement)(i.ButtonGroup,null,(0,o.createElement)(i.Button,{icon:f,isSmall:!0,isPrimary:"left"===e.readMoreAlignment,isSecondary:"left"!==e.readMoreAlignment,onClick:()=>t({readMoreAlignment:"left"}),label:(0,s.__)("Align Left","smart-flashcards")}),(0,o.createElement)(i.Button,{icon:_,isSmall:!0,isPrimary:"center"===e.readMoreAlignment,isSecondary:"center"!==e.readMoreAlignment,onClick:()=>t({readMoreAlignment:"center"}),label:(0,s.__)("Align Center","smart-flashcards")}),(0,o.createElement)(i.Button,{icon:b,isSmall:!0,isPrimary:"right"===e.readMoreAlignment,isSecondary:"right"!==e.readMoreAlignment,onClick:()=>t({readMoreAlignment:"right"}),label:(0,s.__)("Align Right","smart-flashcards")}))))))),e.postId?(0,o.createElement)(u(),{block:"smfcs/single-post-display",attributes:e,skipBlockSupportAttributes:!0,EmptyResponsePlaceholder:()=>(0,o.createElement)(i.Placeholder,{icon:(0,o.createElement)(i.Icon,{icon:y}),label:(0,s.__)("Single Post Display","smart-flashcards"),instructions:(0,s.__)("Loading post content...","smart-flashcards")},(0,o.createElement)(i.Spinner,null)),ErrorResponsePlaceholder:({response:e})=>(0,o.createElement)(i.Placeholder,{icon:(0,o.createElement)(i.Icon,{icon:y}),label:(0,s.__)("Error","smart-flashcards"),instructions:e?.message||(0,s.__)("Error loading post content. Please try again.","smart-flashcards")})}):(0,o.createElement)(i.Placeholder,{icon:(0,o.createElement)(i.Icon,{icon:y}),label:(0,s.__)("Single Post Display","smart-flashcards"),instructions:(0,s.__)("Select a post type and post to display","smart-flashcards")}))},save:()=>null})})();